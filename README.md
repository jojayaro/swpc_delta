# SWPC Solar Wind Data Ingestion to Delta Lake using Rust

## Overview
This repository demonstrates a high-performance Data Engineering Proof of Concept (POC) for ingesting real-time solar wind data from the Space Weather Prediction Center (SWPC) into Delta Lake using Rust. The project showcases efficient handling of non-standard API payloads and frequent data updates.

## Key Features
- **Real-time Data Ingestion**: Processes SWPC solar wind data with 1-minute update intervals.
- **Robust Error Handling**: Implements recovery mechanisms for failures within the last hour using historical data.
- **Delta Lake Integration**: Utilizes Delta Lake for reliable and efficient data storage and management.
- **High-Performance Processing**: Leverages Rust's performance capabilities for rapid data handling.
- **Parallel Processing**: Employs Rayon for parallel data transformation and filtering.

## Technical Stack
- **Language**: Rust
- **Data Format**: Delta Lake
- **Libraries**: 
  - `deltalake`: For Delta Lake operations
  - `tokio`: Asynchronous runtime
  - `reqwest`: HTTP client for API requests
  - `serde`: Serialization and deserialization of JSON data
  - `rayon`: Parallel data processing
  - `chrono`: Date and time handling

## Data Pipeline
1. **Data Fetching**: Retrieves solar wind data from SWPC API.
2. **Data Transformation**: Converts non-standard payload to structured `SolarWind` objects.
3. **Filtering**: Processes only new data based on timestamp comparisons.
4. **Delta Lake Operations**: 
   - Writes data to Delta Lake format
   - Performs table optimization and vacuuming for efficient storage

## Future Enhancements
- Integration of 7-day historical dataset for extended failure recovery.
- Optimization for handling large volumes of files generated by frequent updates.
- Potential cloud storage integration (e.g., Azure Data Lake Storage).

## Applications
This data pipeline is crucial for monitoring and predicting geomagnetic storms, which can lead to Aurora Borealis events. The processed data provides approximately a one-hour window for predicting aurora visibility.

## Visualization
For Aurora prediction visualizations based on this data, visit [jayaro.dev/aurora](https://jayaro.dev/swm).

## Getting Started

To run this project at regular intervals, you can use a scheduling tool like cron. Here's how to set it up to run every minute:

1. Make sure your Rust project is compiled and the binary is located in a known path.

2. Open your crontab file:
   ```
   crontab -e
   ```

3. Add the following line to run the project every minute:
   ```
   * * * * * /path/to/your/binary
   ```
   Replace `/path/to/your/binary` with the actual path to your compiled Rust binary.

4. Save and exit the crontab editor.

This will execute your data ingestion process every minute, ensuring real-time updates of the solar wind data.

Note: Ensure that your system's cron daemon is running and that the user running the cron job has the necessary permissions to execute the binary and write to the Delta Lake storage location.

For systems that don't use cron, consider alternatives like:
- Windows Task Scheduler
- Systemd timers on Linux
- Cloud-based schedulers (e.g., AWS CloudWatch Events, Azure Functions timer trigger)

Always monitor the process to ensure it's running correctly and not overwhelming system resources.


## Contributing

We welcome contributions to improve this project! Here are some guidelines to follow:

1. **Fork the Repository**: Start by forking the project to your own GitHub account.

2. **Create a Branch**: Create a new branch for your feature or bug fix.

3. **Code Style**: Follow the existing code style and conventions used in the project.

4. **Documentation**: Update the README.md or other relevant documentation if your changes introduce new features or modify existing functionality.

5. **Testing**: Add or update tests as necessary to cover your changes.

6. **Commit Messages**: Write clear, concise commit messages describing your changes.

7. **Pull Request**: Submit a pull request with a clear title and description of your changes.

8. **Code Review**: Be open to feedback and be responsive during the code review process.

9. **License**: Ensure that your contributions are compatible with the project's MIT license.

For major changes or new features, please open an issue first to discuss what you would like to change. This ensures that your work aligns with the project's goals and direction.

Thank you for contributing to the SWPC Solar Wind Data Ingestion project!

## License
MIT
